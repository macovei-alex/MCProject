import QtQuick 2.15
import QtQuick.Controls 2.15
import QtQuick.Layouts 1.15

ApplicationWindow {
    visible: true
    width: 400
    height: 300

    RowLayout {
        id: buttons
        anchors.horizontalCenter: parent.horizontalCenter
        z: canvas.z + 1

        Button {
            text: 'Golire'
            onClicked: {
                canvas.clear()
            }
        }

        Button {
            text: 'Iesire'
            onClicked: {
                Qt.quit()
            }
        }
    }

    Canvas {
        id: canvas
        anchors.fill: parent
        visible: false
        property int lastX: 0
        property int lastY: 0

        function clear() {
            var context = getContext('2d')
            context.clearRect(0, 0, canvas.width, canvas.height)
        }

        MouseArea {
            id: area
            anchors.fill: parent

            onClicked: {
                canvas.lastX = mouseX
                canvas.lastY = mouseY
            }

            onPositionChanged: {
                canvas.requestPaint()
            }
        }

        onPaint: {
            var context = getContext('2d')
            context.lineWidth = 5
            context.beginPath()
            context.moveTo(canvas.lastX, canvas.lastY)
            context.lineTo(area.mouseX, area.mouseY)
            context.stroke()


        }
    }
}
